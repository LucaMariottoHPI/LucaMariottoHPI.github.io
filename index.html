<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
    <script>
        // Configuration
        const FORMS = [
            "https://docs.google.com/forms/d/e/1FAIpQLSd2eHXDArbFycjreHqaW59_RLOr1Rc6rXZ9v2GFCfzk-5kvjA/viewform?usp=header",
            "https://docs.google.com/forms/d/e/1FAIpQLSeXZesIe_0ovYVQdSa0YJUB7GtzIYZ_BXHKvAh1CfaxO9kNRg/viewform?usp=header",
            "https://docs.google.com/forms/d/e/1FAIpQLSedi_xTU2GmxzzXv4jzWbxvr65QWHA0oc298YXrNFIdIq3GTg/viewform?usp=header",
            "https://docs.google.com/forms/d/e/1FAIpQLSfkO93lQAkhMRk4ZoLDLq2Vd8xUMTmfwnZ3wvLQCHvhyg0x1Q/viewform?usp=header",
            "https://docs.google.com/forms/d/e/1FAIpQLSeeKRADi2GDs8LrbYllQr9IxyNg7snz7Y2h01zkPGLhH2mCSg/viewform?usp=header",
            "https://docs.google.com/forms/d/e/1FAIpQLSdtRP0n6n8j57dNOGBWH4F8dRBZ9TAvx_Gh4rgT5eEz85Jfww/viewform?usp=header"
        ];
        
        const COUNTS_API_URL = "https://docs.google.com/spreadsheets/d/1YN97U8VRPTg-nn9LaKRc9mD-AKWlOgTRFd9lvWS2px0/gviz/tq?tqx=out:csv&sheet=Sheet1";

        fetch(COUNTS_API_URL)
        .then(r => r.text())
        .then(csv => {
            // Extract the first row of data (response counts)
            const counts = csv.split('\n')[0].split(',').map(Number);
            
            // Find the form(s) with the lowest count
            const minCount = Math.min(...counts);
            const eligibleForms = counts
            .map((count, index) => count === minCount ? index : -1)
            .filter(index => index !== -1);
            
            // Randomly select from eligible forms to avoid bias
            const targetIndex = eligibleForms[Math.floor(Math.random() * eligibleForms.length)];
            
            window.location.href = FORMS[targetIndex];
        })
        .catch(() => window.location.href = "https://www.youtube.com"); // Fallback
        </script>
</head>
<body>
    Redirecting to the survey...
</body>
</html>